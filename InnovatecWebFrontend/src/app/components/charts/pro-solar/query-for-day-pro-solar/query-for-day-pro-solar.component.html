<app-panel-de-control></app-panel-de-control>
<div>
  <div class="consulta center row">
    <div class="col m6 s12 input-container">
      <mat-form-field id="datePicker">
          <input matInput #datePicker [matDatepicker]="picker" ng-readonly="false" placeholder="Seleccione la fecha a graficar">
          <mat-datepicker-toggle matSuffix [for]="picker"></mat-datepicker-toggle>
          <mat-datepicker #picker></mat-datepicker>
      </mat-form-field>
      <button id="btn-graficar" mat-raised-button color="primary" (click)="graficar()" >Graficar</button>
    </div>
    <div class="col m5 s12 input-container">
      <mat-form-field class="input-select" id="selector">
        <mat-label>Gráficas</mat-label>
        <mat-select color="primary" [compareWith]="compareFn">
          <mat-option *ngFor="let c of modos" [value]="c" (click)="mostrarCharts(c)">{{ c }}</mat-option>
        </mat-select>
      </mat-form-field>
      <button id="btn-exp" mat-raised-button color="primary" [disabled]="!deteccion" (click)="exportar()">Exportar</button>
    </div>
  </div>

  <div class="row">
    <div *ngIf="chartsEnables[0];" [ngClass]="{'offset-m3': !chartsEnables[1]}" class="col m6 s12 chart">
      <div style="display: block;"  >
        <canvas baseChart
          height="276"
          [datasets]="lineChartData"
          [labels]="lineChartLabels"
          [options]="lineChartOptions"
          [colors]="lineChartColors"
          [legend]="lineChartLegend"
          [chartType]="lineChartType"
          [plugins]="lineChartPlugins">
        </canvas>
      </div>
      <div class="center">
        <button class="btn-change" mat-raised-button id="btn-humedad" (click)="cambioDeChart(0)">
          Humedad
        </button>
        <button class="btn-change" mat-raised-button id="btn-temperatura" (click)="cambioDeChart(1)">
          Temperatura
        </button>
        <button class="btn-change"  mat-raised-button id="btn-irradiancia" (click)="cambioDeChart(2)">
          Irradiancia
        </button>

        <button class="flow-text btn-change" mat-raised-button id="btn-corriente" (click)="cambioDeChart(3)">
          Corriente
        </button>

        <button class="flow-text btn-change" mat-raised-button id="btn-voltaje" (click)="cambioDeChart(4)">
          Voltaje
        </button>
      </div>
    </div>

    <div *ngIf="chartsEnables[1]" class="col m6 s12 chart">
      <div style="display: block;">
        <canvas baseChart
          height="276"
          [datasets]="lineChartData1"
          [labels]="lineChartLabels1"
          [options]="lineChartOptions"
          [colors]="lineChartColors1"
          [legend]="lineChartLegend"
          [chartType]="lineChartType"
          [plugins]="lineChartPlugins">
        </canvas>
      </div>
      <div class="center">
        <button class="btn-change" mat-raised-button id="btn-humedad" (click)="cambioDeChart1(0)">
          Humedad
        </button>
        <button class="btn-change" mat-raised-button id="btn-temperatura" (click)="cambioDeChart1(1)">
          Temperatura
        </button>
        <button class="btn-change"  mat-raised-button id="btn-irradiancia" (click)="cambioDeChart1(2)">
          Irradiancia
        </button>

        <button class="flow-text btn-change" mat-raised-button id="btn-corriente" (click)="cambioDeChart1(3)">
          Corriente
        </button>

        <button class="flow-text btn-change" mat-raised-button id="btn-voltaje" (click)="cambioDeChart1(4)">
          Voltaje
        </button>
      </div>
    </div>

    <div *ngIf="chartsEnables[2]" class="col m6 s12 chart">
      <div style="display: block;">
        <canvas baseChart
          height="276"
          [datasets]="lineChartData2"
          [labels]="lineChartLabels2"
          [options]="lineChartOptions"
          [colors]="lineChartColors2"
          [legend]="lineChartLegend"
          [chartType]="lineChartType"
          [plugins]="lineChartPlugins">
        </canvas>
      </div>
      <div class="center">
        <button class="btn-change" mat-raised-button id="btn-humedad" (click)="cambioDeChart2(0)">
          Humedad
        </button>
        <button class="btn-change" mat-raised-button id="btn-temperatura" (click)="cambioDeChart2(1)">
          Temperatura
        </button>
        <button class="btn-change"  mat-raised-button id="btn-irradiancia" (click)="cambioDeChart2(2)">
          Irradiancia
        </button>

        <button class="flow-text btn-change" mat-raised-button id="btn-corriente" (click)="cambioDeChart2(3)">
          Corriente
        </button>

        <button class="flow-text btn-change" mat-raised-button id="btn-voltaje" (click)="cambioDeChart2(4)">
          Voltaje
        </button>
      </div>
    </div>


    <div *ngIf="chartsEnables[3]" class="col m6 s12 chart">
      <div style="display: block;">
        <canvas baseChart
          height="276"
          [datasets]="lineChartData3"
          [labels]="lineChartLabels3"
          [options]="lineChartOptions"
          [colors]="lineChartColors3"
          [legend]="lineChartLegend"
          [chartType]="lineChartType"
          [plugins]="lineChartPlugins">
        </canvas>
      </div>
      <div class="center">
        <button class="btn-change" mat-raised-button id="btn-humedad" (click)="cambioDeChart3(0)">
          Humedad
        </button>
        <button class="btn-change" mat-raised-button id="btn-temperatura" (click)="cambioDeChart3(1)">
          Temperatura
        </button>
        <button class="btn-change"  mat-raised-button id="btn-irradiancia" (click)="cambioDeChart3(2)">
          Irradiancia
        </button>

        <button class="flow-text btn-change" mat-raised-button id="btn-corriente" (click)="cambioDeChart3(3)">
          Corriente
        </button>

        <button class="flow-text btn-change" mat-raised-button id="btn-voltaje" (click)="cambioDeChart3(4)">
          Voltaje
        </button>
      </div>
    </div>
  </div>

  <div class="row" id="tabla1">
      <table class="responsive-table striped col s12" >
        <thead>
          <tr>
              <th>Hora</th>
              <th>Promedio Irradiancia</th>
              <th>Promedio humedad</th>
              <th>Promedio Corriente</th>
              <th>Promedio Volataje</th>
              <th>Promedio Potencia</th>
              <th>Promedio Temperatura</th>
          </tr>
        </thead>
        <tbody>
          <tr *ngFor="let e of averageData">
            <td>{{ e.hora }}</td>
            <td>{{ e.irradianciaPromedio }}</td>
            <td>{{ e.humedadPromedio }}</td>
            <td>{{ e.corrientePromedio }}</td>
            <td>{{ e.voltajePromedio }}</td>
            <td>{{ e.potenciaPromedio }}</td>
            <td>{{ e.temperaturaPromedio }}</td>
          </tr>
        </tbody>
      </table>
      <table class="col s6 offset-s3">

        <tbody>
          <tr>
            <th>Irradiancia Global (W/h)</th>
            <td>{{ irradianciaGlobal }}</td>
          </tr>
          <tr>
            <th>Energía Día (Wh/m²/dia)</th>
            <td>{{ potenciaGlobal }}</td>
          </tr>
          <tr>
            <th>Horas de Sol (W/dia)</th>
            <td>{{ horasSol }}</td>
          </tr>
        </tbody>
      </table>
  </div>

</div>

